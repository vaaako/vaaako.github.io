<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Fernanda | PGP</title>

	<link rel="stylesheet" type="text/css" href="../../../assets/css/style.css">

	<style type="text/css">
		.code {
			/*background: darkslategray;*/
			background: black;
			opacity: 75%;

			text-align: left;
			font-weight: bold;
			color: darkgray;

			padding: 5px;
			border-radius: 5px;
			margin-top: 10px;
			margin-bottom: 20px;
		}
	</style>
</head>
<body class="box">
	<h1> Introduction </h1>
	<i>GPG</i>, or <i>GNU Privacy Guard</i>, is a publick key cryptography implementation. This allows for the secure transmission of information between parties and can be used to verify that the origin of a message is genuine.

	Usage example:
	<ul>
		<li> <!-- Private Key -->
			Your friend creates a PGP, now he have the <strong>Public </strong> and <strong>Private key</strong>. The <strong>Private key</strong> is used to <i>Decrypt</i> a message <i>Encrypted</i> with the <strong>Public key</strong>.
		</li>

		<li> <!-- Public Key -->
			The <strong>Public key</strong> can be used for anyone to <i>Encrypt</i> a message, but only who has the <strong>Private key</strong> can read the message. So you use the <strong>Public key</strong> of your friend to send him a message, so only him can read the message.
		</li>

		<li> <!-- Signature Key -->
			Your friend uses the <strong>Private key</strong> to read your message and sends back a message to you, but this time he <i>sign</i>, a <i>signature</i> is used to know who is the author of the message, only the <strong>Private key</strong> can be used to make a signature.
		</li>
	</ul>



	<h1> Set Up GPG Keys (Linux only) </h1>
	GPG is installed by default in most distributions.<br><br>

	If for any reason GPG is not installed, on Ubuntu and Debian, you can update the local repo index and install it by typing:

	<div class="code">
		$ sudo apt-get update<br>
		$ sudo apt-get install gnupg
	</div>

	On CentOS, you can install GPG by typing:
	<div class="code">
		$ sudo yum install gnupg2
	</div>

	To begin, you need to create a key pair, You can do this by issuing the following command:
	<div class="code">
		$ gpg --full-generate-key
	</div>

	This will take you through a few questions that you configure your keys.
	<strong>WARNING:</strong> Your name and adress are visible for anyone with the <strong>Public</strong> or <strong>Private key</strong>.

	<ul>
		<li>
			<i>Please select what kind of key you want:</i> <strong>1</strong>
		</li>

		<li>
			<i>What keysize do you want?</i> <strong>4096</strong>
		</li>

		<li>
			<i>Key is valid for?</i> <strong>1y <i>(expires after 1 year. If you are just testing, you may want to create a short-lived key the first time by using a number like "1" (1 day) instead.)</i></strong>
		</li>

		<li>
			<i>Is this correct?</i> <strong>y <i>(If not you fix :P)</i></strong>
		</li>

		<li>
			<i>Real name:</i> <strong>Don't necessary need to be your real name</strong>
		</li>

		<li>
			<i>Email address:</i> <strong>This need to be a real email adress</strong>
		</li>

		<li>
			<i>Comment:</i> <strong>Optional comment that will be visible in your signature</strong>
		</li>

		<li>
			<i>Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit?</i> <strong>O</strong>
		</li>

		<li>
			<i>Enter passphrase:</i> <strong>Enter a secure passphrase here<i>(Remeber of that password, you will ned it to decrypt a message )</i></strong>
		</li>
	</ul>

	GPG will generate the keys using entropy. Entropy describes the amount of unpredictability and nondeterminism that exists in a system. GPG needs this entropy to generate a secure set of keys.

	<h2> Get Public Key </h2>
	You can get your <strong>Public key</strong> by the fingerprint. Use this command to see all your keys:
	<div class="code">
		$ gpg -K
	</div>

	Now use this command to display the <strong>Public key</strong>:
	<div class="code">
		$ gpg -a --export <i>fingerprint</i>
	</div>




	<h1> Create a Revocation Certificate (you can skip that) </h1>
	You need to have a way of invalidating your key pair in case there is a security breach or in case you lose your secret key. There is an easy way of doing this with the GPG software.<br><br>

	This should be done as soon as you make the key pair, not when you need it. This revocation key must be generated ahead of time and kept in a secure, separate location in case your computer is compromised or inoperable. To generate a revocation key, type:
	<div class="code">
		$ gpg --output ~/<i>revocation.crt</i> --gen-revoke <i>your_email@address.com</i>
	</div>

	You should immediately restrict the permissions on the generated certificate file in order to prevent unauthorized access:
	<div class="code">
		$ chmod 600 ~/<i>revocation.crt</i>
	</div>



	<h1> How To Import Other Users Public Keys </h1>
	GPG would be pretty useless if you could not accept other public keys from people you wished to communicate with.

	You can import someone’s public key in a variety of ways. If you’ve obtained a public key from someone in a text file, GPG can import it with the following command:
	<div class="code">
		$ gpg --import <i>name_of_pub_key_file</i>
	</div>

	There is also the possibility that the person you are wishing to communicate with has uploaded their key to a public key server. These key servers are used to house people’s public keys from all over the world.

	A popular key server that syncs its information with a variety of other servers is the MIT public key server. You can search for people by their name or email address by going here in your <a href="https://pgp.mit.edu/">web browser</a> or using GPG:
	<div class="code">
		$ gpg --keyserver pgp.mit.edu  --search-keys <i>search_parameters</i>
	</div>

	<h2> How To Verify and Sign Keys </h2>
	How do you know that the person giving you the public key is who they say they are? Instead of verifying the entire public keys of both parties, you can simply compare the “fingerprint” derived from these keys. This will give you a reasonable assurance that you both are using the same public key information.
	<div class="code">
		$ gpg --fingerprint <i>your_email@address.com</i>
	</div>

	This will produce a much more manageable string of numbers to compare. You can compare this string with the person themselves, or with someone else who has access to that person.

	<h2> Sign Their Key </h2>
	Signing a key tells your software that you trust the key that you have been provided with and that you have verified that it is associated with the person in question.
	<div class="code">
		$ gpg --sign-key <i>email@example.com</i>
	</div>

	You should allow the person whose key you are signing to take advantage of your trusted relationship by sending them back the signed key. You can do this by typing:
	<div class="code">
		$ gpg --output ~/signed.key --export --armor <i>email@example.com</i>
	</div>

	When they receive this new, signed key, they can import it, adding the signing information you’ve generated into their GPG database. They can do this by typing:
	<div class="code">
		$ gpg --import ~/<i>signed.key</i>
	</div>

	<h2> Making and verifying signatures </h2>
	A digital signature certifies and timestamps a document. If the document is subsequently modified in any way, a verification of the signature will fail. A digital signature can serve the same purpose as a hand-written signature with the additional benefit of being tamper-resistant. The GnuPG source distribution, for example, is signed so that users can verify that the source code has not been modified since it was packaged.<br><br>

	The command-line option <strong>--sign</strong> is used to make a digital signature. The document to sign is input, and the signed document is output.
	<div class="code">
		$ gpg --output <i>output_file_name</i> --sign <i>file_to_be_signed</i>
	</div>

	 The document is compressed before signed, and the output is in binary format.<br><br>

	 Given a signed document, you can either check the signature or check the signature and recover the original document.<br><br>

	 To check the signature use the <strong>--verify</strong> option. To verify the signature and extract the document use the <strong>--decrypt</strong> option. The signed document to verify and recover is input and the recovered document is output.

 	<div class="code">
		$ gpg --output <i>output_file_name</i> --decrypt <i>file_with_signature</i>
	</div>

	<h2> Clearsigned documents </h2>
	A common use of digital signatures is to sign usenet postings or email messages.<br><br>

	In such situations it is undesirable to compress the document while signing it. The option <strong>--clearsign</strong> causes the document to be wrapped in an ASCII-armored signature but otherwise does not modify the document.

 	<div class="code">
		$ gpg --clearsign <i>file_name</i>
	</div>

	<h2> Deatached signatures </h2>
	A signed document has limited usefulness. Other users must recover the original document from the signed version, and even with clearsigned documents, the signed document must be edited to recover the original.<b><br>

	Therefore, there is a third method for signing a document that creates a detached signature.<br><br>

	A detached signature is created using the --detach-sig option.
 	<div class="code">
		$ gpg --output <i>output_file_name</i> --detach-sig <i>file_name</i>

	</div>

	Both the document and detached signature are needed to verify the signature. The <strong>--verify</strong> option can be to check the signature.
 	<div class="code">
		$ gpg --verify <i>file_with_signature</i> <i>original_file_name</i>
	</div>


	<h1> How To Make Your Public Key Highly Available </h1>
	Because of the way that public key encryption is designed, there is not anything malicious that can happen if unknown people have your public key.<br><br>

	With this in mind, it may be beneficial to make your public key publicly available. People can then find your information to send you messages securely from your very first interaction.<br><br>

	You can send anyone your public key by requesting it from the GPG system:
	<div class="code">
		$ gpg --output ~/<i>mygpg.key</i> --armor --export <i>your_email@address.com</i>
	</div>
	You can then send this file to the other party over an appropriate medium.<br><br>

	If you want to publish your key to a key server, you can do it manually through the forms available on most of the server sites.<br><br>

	Another option is to do this through the GPG interface. Look up your key ID by typing:
	<div class="code">
		$ gpg --list-keys <i>your_email@address.com</i>
	</div>

	The ID you are looking for is the highlilghted here: <code>pub   4096R/<strong>311B1F84M</strong> 2013-10-04</code>
	<br><br>

	To upload your key to a certain key server, you can then use this syntax:
	<div class="code">
		$ gpg gpg --send-keys --keyserver pgp.mit.edu <i>key_id</i>
	</div>

	The key will be uploaded to the specified server. Afterwards, it will likely be distributed to other key servers around the world.

	<h1> Encrypt and Decrypt Messages with GPG </h1>
	<h2> Encrypt </h2>
	<div class="code">
		$ gpg --encrypt --sign --armor -r <i>person@email.com</i> <i>name_of_file</i>
	</div>

	This encrypts the message using the recipient’s public key, signs it with your own private key to guarantee that it is coming from you, and outputs the message in a text format instead of raw bytes. The filename will be the same as the input filename, but with an .asc extension.<br><br>

	You should include a second “-r” recipient with your own email address if you want to be able to read the encrypted message. This is because the message will be encrypted with each person’s public key, and will only be able to be decrypted with the associated private key.<br><br>

	So if it was only encrypted with the other party’s public key, you would not be able to view the message again, unless you somehow obtained their private key. Adding yourself as a second recipient encrypts the message two separate times, one for each recipient.

	<h2> Decrypt </h2>
	<div class="code">
		$ gpg <i>file_name</i>.asc
	</div>

	If instead of a file, you have the message as a raw text stream, you can copy and paste it after typing <strong>gpg</strong> without any arguments. You can press "CTRL-D" to signify the end of the message and GPG will decrypt it for you.

	<h1> Key Maintenance </h1>
	There are a number of procedures that you may need to use on a regular basis to manage your key database.<br><br>

	To list your available GPG keys that you have from other people, you can issue this command:
	<div class="code">
		$ gpg --list-keys
	</div>

	Your key information can become outdated if you are relying on information pulled from public key servers. You do not want to be relying on revoked keys, because that would mean you are trusting potentially compromised keys.<br><br>

	You can update the key information by issuing:
	<div class="code">
		$ gpg --refresh-keys
	</div>

	This will fetch new information from the key servers.<br><br>

	You can pull information from a specific key server by using:
	<div class="code">
		$ gpg --keyserver <i>key_server</i> --refresh-keys
	</div>


	<hr><br>
	<footer><a href="../../hall">Back</a></footer>
</body>
</html>
